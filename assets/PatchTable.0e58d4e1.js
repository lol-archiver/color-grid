import{p as e,a as l,t,h as a,r as s,c as n,b as r,F as i,i as o,u as c,j as u,f as p,n as v,k as d,l as h,m,q as g}from"./vendor.9cafa8d9.js";import{p as f}from"./parseColor.51caf39a.js";e("data-v-5e41d771");const y={class:"overflow-auto"},k={class:"relative w-full h-14 leading-14 overflow-hidden"},b=r("div",{class:"inline-block align-top relative w-24 text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125"},"版本",-1),w=[r("div",{class:"Item _lineFirst inline-block relative text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125",style:{width:"100%"}},"更新内容",-1)],x=["onMouseenter"],B=["onMouseenter"],_={key:0,class:"relative"},S={class:"relative"},T={key:0,class:"absolute block -top-2 left-1 text-xs text-gray-500"},$={key:1,class:"Item _lineFirst relative h-14"};l();const j={props:{data:{type:Object,default:()=>({champion:{cn:{},en:{}},patches:{}})}},setup(e){const l=e,{champion:j,patches:H}=t(l.data),{cn:I,en:F}=t(j.value),M=a((()=>Object.entries(H.value).reduce(((e,l)=>{const[t,a]=l;return e[t]=a.reduce(((e,l)=>{var t,a,s;const[n,r]=l.csid.split(/(?<=^(?:.{3})+)(?!$)/).map((e=>Number(e))),i=I.value[n],o=i.skins[r],c=F.value[n],u=c.skins[r],p=(null!=(t=l.tag)?t:"").split("|"),v={csid:l.csid,cid:n,sid:r,type:l.type,isUltimate:Boolean(p.includes("ut")),isPrestige:Boolean(p.includes("pt")),isMythic:Boolean(p.includes("my")),isLegendary:Boolean(p.includes("lg")),isTimeworn:Boolean(p.includes("tw")),isLimit:Boolean(p.includes("lm")),isUpdate:Boolean(p.includes("up")),isSplit:Boolean(p.includes("sp")),colors:{},name:`${null!=(a=u.nameStage)?a:u.name}\n${null!=(s=o.nameStage)?s:o.name}`};return 0==r&&(v.name=`${c.name}, ${c.title}\n${i.title} ${i.name}`),f(v),"ns"==v.type||"nh"==v.type?e.main.push(v):"up"==v.type?e.skin.push(v):"uh"==v.type?e.skill.push(v):"uv"==v.type?e.voice.push(v):"uc"==v.type&&e.chromas.push(v),e}),{main:[],skin:[],skill:[],voice:[],chromas:[]}),e}),{}))),L=a((()=>Object.entries(M.value).reduce(((e,[l,t])=>(e[l]=(t.main.length>0)+(t.skin.length>0||t.skill.length>0||t.voice.length>0||t.chromas.length>0),e)),{}))),W=s(1),C=s({main:"▼ 全新推出",skin:"▼ 品质更新",skill:"▼ 技能更新",voice:"▼ 语音更新",chromas:"▼ 炫彩追加"}),N=s(null),O=s(null),P=s(null),U=e=>{W.value=e.target},q=e=>{let l=e.target;for(;l.parentNode;)l=l.parentNode,l!=N.value&&l!=O.value||(W.value=l)},z=e=>{if(W.value!==e.target)return;const l=e.target,t=e.target===O.value?N.value:O.value,a=(l.scrollHeight-l.clientHeight)/(t.scrollHeight-t.clientHeight);t.scrollTop=l.scrollTop/a;const s=(P.value.scrollWidth-P.value.clientWidth)/(O.value.scrollWidth-O.value.clientWidth);P.value.scrollLeft=O.value.scrollLeft/s};return(e,l)=>(p(),n("div",y,[r("div",k,[b,r("div",{ref:P,class:"Header _hideBar inline-block align-top relative whitespace-nowrap h-14 leading-14 overflow-auto",style:{width:"calc(100% - 6rem - 7px)"}},w,512)]),r("div",{ref:N,class:"Patcher _hideBar relative w-24 overflow-auto",onMouseenter:u(U,["self"]),onTouchstart:q,onScroll:z},[(p(!0),n(i,null,o(c(M),((e,l,t)=>(p(),n("div",{class:v(["relative w-full text-center cursor-pointer select-none filter hover:contrast-125",{"bg-gray-500":t%2,"bg-gray-600":!(t%2)}]),style:d({height:3.5*(c(L)[l]||1)+"rem",lineHeight:3.5*(c(L)[l]||1)+"rem"})},h(l),7)))),256))],40,x),r("div",{ref:O,class:"Table relative overflow-auto",onMouseenter:u(U,["self"]),onTouchstart:q,onScroll:z},[r("table",{ref:TableItem},[(p(!0),n(i,null,o(c(M),((e,l)=>(p(),n(i,null,[e.main.length?(p(),n("tr",_,[(p(!0),n(i,null,o(e.main,((e,l)=>(p(),n("td",{class:v(["Item relative px-4 py-0 h-14 leading-7 text-sm whitespace-pre text-center overflow-ellipsis filter hover:contrast-125 cursor-pointer",{_split:e.isSplit&&0!=l,_lineFirst:0==l}]),style:d({backgroundColor:e.colors.back,color:e.colors.font})},h(e.name),7)))),256))])):m("",!0),r("tr",S,[(p(!0),n(i,null,o(e,((e,l)=>(p(),n(i,null,["main"!=l&&e.length?(p(!0),n(i,{key:0},o(e,((e,t)=>(p(),n("td",{class:v(["Item relative px-4 py-0 h-14 leading-7 text-sm whitespace-pre text-center overflow-ellipsis filter hover:contrast-125 cursor-pointer",{_split:e.isSplit&&0!=t,_lineFirst:0==t}]),style:d({backgroundColor:e.colors.back,color:e.colors.font})},[g(h(e.name)+" ",1),0==t?(p(),n("div",T,h(C.value[l]),1)):m("",!0)],6)))),256)):m("",!0)],64)))),256))]),0==c(L)[l]?(p(),n("tr",$)):m("",!0)],64)))),256))],512)],40,B)]))},__scopeId:"data-v-5e41d771"};export{j as default};
