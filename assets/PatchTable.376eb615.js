import{t as e,h as t,r as s,p as l,a as i,b as a,c as r,d as c,l as o,F as n,i as h,j as d,f as p,k as u}from"./vendor.bf926a78.js";const v={props:{data:{type:Object,default:()=>({champion:{cn:{},en:{}},patches:{}})}},setup(l){const{champion:i,patches:a}=e(l.data),{cn:r,en:c}=e(i.value),o=t((()=>Object.entries(a.value).reduce(((e,t)=>{const[s,l]=t;return e[s]=l.reduce(((e,t)=>{const[s,l]=t.csid.split(/(?<=^(?:.{3})+)(?!$)/).map((e=>Number(e))),i=r.value[s],a=i.skins[l],o=c.value[s],n=o.skins[l],h=t.tags?t.tags.split("|"):[],d={csid:t.csid,cid:s,sid:l,type:t.type,isUltimate:Boolean(h.includes("ut")),isPrestige:Boolean(h.includes("pt")),isMythic:Boolean(h.includes("my")),isLegendary:Boolean(h.includes("lg")),isTimeworn:Boolean(h.includes("tw")),isLimit:Boolean(h.includes("lm")),isUpdate:Boolean(h.includes("up")),isSplit:Boolean(h.includes("sp")),colors:{},name:`${n.name}\n${a.name}`};return 0==l&&(d.name=`${o.name}, ${o.title}\n${i.title} ${i.name}`),(e=>{let t="#ffffff",s="#000000";t=0==e.sid?"#C6E0B4":e.isUltimate?"#FFE699":e.isPrestige?"#F8CBAD":e.isMythic?"#AE88FF":e.isLegendary?"#FF8383":e.isTimeworn?"#00C8FF":e.isLimit?"#BDD7EE":"#DAC2EC",e.isUpdate?s="#C00000":"#BDD7EE"!=t&&e.isLimit&&(s="#396c9a"),e.colors.back=t,e.colors.font=s})(d),1==d.type||2==d.type?e.main.push(d):3==d.type?e.skin.push(d):4==d.type?e.skill.push(d):5==d.type?e.voice.push(d):6==d.type&&e.chromas.push(d),e}),{main:[],skin:[],skill:[],voice:[],chromas:[]}),e}),{}))),n=t((()=>Object.values(o.value).reduce(((e,t)=>(e.main=Math.max(t.main.length,e.main),e.skin=Math.max(t.skin.length,e.skin),e.skill=Math.max(t.skill.length,e.skill),e.voice=Math.max(t.voice.length,e.voice),e.chromas=Math.max(t.chromas.length,e.chromas),e)),{main:0,skin:0,skill:0,voice:0,chromas:0})));return{patchesParsed:o,scrollNow:1,sizesPatches:n,widthsPatches:s({main:0,skin:0,skill:0,voice:0,chromas:0})}},mounted(){this.calcWidthsPatches()},methods:{atOver(e){this.scrollNow=e.target},atTouch(e){const t=this.$refs.Patcher,s=this.$refs.Table;let l=e.target;for(;l.parentNode;)l=l.parentNode,l!=t&&l!=s||(this.scrollNow=l)},atScroll(e){if(this.scrollNow!==e.target)return;const t=this.$refs.Patcher,s=this.$refs.Table,l=this.$refs.Header,i=e.target,a=e.target===s?t:s,r=(i.scrollHeight-i.clientHeight)/(a.scrollHeight-a.clientHeight);a.scrollTop=i.scrollTop/r;const c=(l.scrollWidth-l.clientWidth)/(s.scrollWidth-s.clientWidth);l.scrollLeft=s.scrollLeft/c},calcWidthsPatches(){const e=[...this.$refs.TableItem.querySelector("tr").children],t=Object.keys(this.widthsPatches);let s=t.shift(),l=0;e.forEach((e=>{const i=~~(e.getAttribute("colspan")||1);this.widthsPatches[s]+=e.getClientRects()[0].width,l+=i,l==this.sizesPatches[s]&&(s=t.shift(),l=0)}))}}},m=p();l("data-v-3f86f4e6");const f={class:"overflow-auto"},g={class:"relative w-full h-14 leading-14 overflow-hidden"},y=c("div",{class:"inline-block align-top relative w-24 text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125"},"版本",-1),k={ref:"Header",class:"Header _hideBar inline-block align-top relative whitespace-nowrap h-14 leading-14 overflow-auto",style:{width:"calc(100% - 6rem - 7px)"}},w={class:"relative w-full h-14 leading-14 text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125"},b={ref:"TableItem"};i();const P=m(((e,t,s,l,i,p)=>(a(),r("div",f,[c("div",g,[y,c("div",k,[l.sizesPatches.main?(a(),r("div",{key:0,class:"Item _typeFirst inline-block relative text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125",style:{width:`${l.widthsPatches.main||240}px`}},"全新推出",4)):o("",!0),l.sizesPatches.skin?(a(),r("div",{key:1,class:"Item _typeFirst inline-block relative text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125",style:{width:`${l.widthsPatches.skin||240}px`}},"品质升级",4)):o("",!0),l.sizesPatches.skill?(a(),r("div",{key:2,class:"Item _typeFirst inline-block relative text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125",style:{width:`${l.widthsPatches.skill||240}px`}},"技能重做",4)):o("",!0),l.sizesPatches.voice?(a(),r("div",{key:3,class:"Item _typeFirst inline-block relative text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125",style:{width:`${l.widthsPatches.voice||240}px`}},"语音更新",4)):o("",!0),l.sizesPatches.chromas?(a(),r("div",{key:4,class:"Item _typeFirst inline-block relative text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125",style:{width:`${l.widthsPatches.chromas||240}px`}},"炫彩追加",4)):o("",!0)],512)]),c("div",{ref:"Patcher",class:"Patcher _hideBar relative w-24 overflow-auto",onMouseenter:t[1]||(t[1]=d(((...e)=>p.atOver&&p.atOver(...e)),["self"])),onTouchstart:t[2]||(t[2]=(...e)=>p.atTouch&&p.atTouch(...e)),onScroll:t[3]||(t[3]=(...e)=>p.atScroll&&p.atScroll(...e))},[(a(!0),r(n,null,h(l.patchesParsed,((e,t)=>(a(),r("div",w,u(t),1)))),256))],544),c("div",{ref:"Table",class:"Table relative overflow-auto",onMouseenter:t[4]||(t[4]=d(((...e)=>p.atOver&&p.atOver(...e)),["self"])),onTouchstart:t[5]||(t[5]=(...e)=>p.atTouch&&p.atTouch(...e)),onScroll:t[6]||(t[6]=(...e)=>p.atScroll&&p.atScroll(...e))},[c("table",b,[(a(!0),r(n,null,h(l.patchesParsed,(e=>(a(),r("tr",null,[(a(!0),r(n,null,h(e,((e,t)=>(a(),r(n,null,[(a(!0),r(n,null,h(e,((e,t)=>(a(),r("td",{class:["Item relative h-14 px-4 py-0 leading-7 text-sm whitespace-pre text-center overflow-ellipsis filter hover:contrast-125 cursor-pointer select-none",{_split:e.isSplit&&0!=t,_typeFirst:0==t}],style:{backgroundColor:e.colors.back,color:e.colors.font}},u(e.name),7)))),256)),l.sizesPatches[t]>e.length?(a(),r("td",{key:0,class:["Item relative h-14",{_typeFirst:0==e.length}],colspan:l.sizesPatches[t]-e.length},null,10,["colspan"])):o("",!0)],64)))),256))])))),256))],512)],544)]))));v.render=P,v.__scopeId="data-v-3f86f4e6";export default v;
