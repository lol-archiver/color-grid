import{t as e,h as t,r as l,p as s,a,b as r,c as o,d as i,F as n,i as c,j as h,f as p,k as u,l as d,m as v}from"./vendor.0e163395.js";import{p as m}from"./parseColor.51caf39a.js";const g={props:{data:{type:Object,default:()=>({champion:{cn:{},en:{}},patches:{}})}},setup(s){const{champion:a,patches:r}=e(s.data),{cn:o,en:i}=e(a.value),n=t((()=>Object.entries(r.value).reduce(((e,t)=>{const[l,s]=t;return e[l]=s.reduce(((e,t)=>{var l,s,a;const[r,n]=t.csid.split(/(?<=^(?:.{3})+)(?!$)/).map((e=>Number(e))),c=o.value[r],h=c.skins[n],p=i.value[r],u=p.skins[n],d=(null!=(l=t.tag)?l:"").split("|"),v={csid:t.csid,cid:r,sid:n,type:t.type,isUltimate:Boolean(d.includes("ut")),isPrestige:Boolean(d.includes("pt")),isMythic:Boolean(d.includes("my")),isLegendary:Boolean(d.includes("lg")),isTimeworn:Boolean(d.includes("tw")),isLimit:Boolean(d.includes("lm")),isUpdate:Boolean(d.includes("up")),isSplit:Boolean(d.includes("sp")),colors:{},name:`${null!=(s=u.nameStage)?s:u.name}\n${null!=(a=h.nameStage)?a:h.name}`};return 0==n&&(v.name=`${p.name}, ${p.title}\n${c.title} ${c.name}`),m(v),"ns"==v.type||"nh"==v.type?e.main.push(v):"up"==v.type?e.skin.push(v):"uh"==v.type?e.skill.push(v):"uv"==v.type?e.voice.push(v):"uc"==v.type&&e.chromas.push(v),e}),{main:[],skin:[],skill:[],voice:[],chromas:[]}),e}),{}))),c=t((()=>Object.entries(n.value).reduce(((e,[t,l])=>(e[t]=(l.main.length>0)+(l.skin.length>0||l.skill.length>0||l.voice.length>0||l.chromas.length>0),e)),{})));return{patchesParsed:n,scrollNow:1,countsType:c,namesType:l({main:"▼ 全新推出",skin:"▼ 品质更新",skill:"▼ 技能更新",voice:"▼ 语音更新",chromas:"▼ 炫彩追加"})}},mounted(){},methods:{atOver(e){this.scrollNow=e.target},atTouch(e){const t=this.$refs.Patcher,l=this.$refs.Table;let s=e.target;for(;s.parentNode;)s=s.parentNode,s!=t&&s!=l||(this.scrollNow=s)},atScroll(e){if(this.scrollNow!==e.target)return;const t=this.$refs.Patcher,l=this.$refs.Table,s=this.$refs.Header,a=e.target,r=e.target===l?t:l,o=(a.scrollHeight-a.clientHeight)/(r.scrollHeight-r.clientHeight);r.scrollTop=a.scrollTop/o;const i=(s.scrollWidth-s.clientWidth)/(l.scrollWidth-l.clientWidth);s.scrollLeft=l.scrollLeft/i}}},f=p();s("data-v-c6e93830");const y={class:"overflow-auto"},b={class:"relative w-full h-14 leading-14 overflow-hidden"},k=i("div",{class:"inline-block align-top relative w-24 text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125"},"版本",-1),w={ref:"Header",class:"Header _hideBar inline-block align-top relative whitespace-nowrap h-14 leading-14 overflow-auto",style:{width:"calc(100% - 6rem - 7px)"}},T=i("div",{class:"Item _lineFirst inline-block relative text-center bg-gray-600 cursor-pointer select-none filter hover:contrast-125",style:{width:"100%"}},"更新内容",-1),x={ref:"TableItem"},S={key:0,class:"relative"},$={class:"relative"},B={key:0,class:"absolute block -top-2 left-1 text-xs text-gray-500"},_={key:1,class:"Item _lineFirst relative h-14"};a();const H=f(((e,t,l,s,a,p)=>(r(),o("div",y,[i("div",b,[k,i("div",w,[T],512)]),i("div",{ref:"Patcher",class:"Patcher _hideBar relative w-24 overflow-auto",onMouseenter:t[1]||(t[1]=h(((...e)=>p.atOver&&p.atOver(...e)),["self"])),onTouchstart:t[2]||(t[2]=(...e)=>p.atTouch&&p.atTouch(...e)),onScroll:t[3]||(t[3]=(...e)=>p.atScroll&&p.atScroll(...e))},[(r(!0),o(n,null,c(s.patchesParsed,((e,t,l)=>(r(),o("div",{class:["relative w-full text-center cursor-pointer select-none filter hover:contrast-125",{"bg-gray-500":l%2,"bg-gray-600":!(l%2)}],style:{height:3.5*(s.countsType[t]||1)+"rem",lineHeight:3.5*(s.countsType[t]||1)+"rem"}},u(t),7)))),256))],544),i("div",{ref:"Table",class:"Table relative overflow-auto",onMouseenter:t[4]||(t[4]=h(((...e)=>p.atOver&&p.atOver(...e)),["self"])),onTouchstart:t[5]||(t[5]=(...e)=>p.atTouch&&p.atTouch(...e)),onScroll:t[6]||(t[6]=(...e)=>p.atScroll&&p.atScroll(...e))},[i("table",x,[(r(!0),o(n,null,c(s.patchesParsed,((e,t)=>(r(),o(n,null,[e.main.length?(r(),o("tr",S,[(r(!0),o(n,null,c(e.main,((e,t)=>(r(),o("td",{class:["Item relative px-4 py-0 h-14 leading-7 text-sm whitespace-pre text-center overflow-ellipsis filter hover:contrast-125 cursor-pointer",{_split:e.isSplit&&0!=t,_lineFirst:0==t}],style:{backgroundColor:e.colors.back,color:e.colors.font}},u(e.name),7)))),256))])):d("",!0),i("tr",$,[(r(!0),o(n,null,c(e,((e,t)=>(r(),o(n,null,["main"!=t&&e.length?(r(!0),o(n,{key:0},c(e,((e,l)=>(r(),o("td",{class:["Item relative px-4 py-0 h-14 leading-7 text-sm whitespace-pre text-center overflow-ellipsis filter hover:contrast-125 cursor-pointer",{_split:e.isSplit&&0!=l,_lineFirst:0==l}],style:{backgroundColor:e.colors.back,color:e.colors.font}},[v(u(e.name)+" ",1),0==l?(r(),o("div",B,u(s.namesType[t]),1)):d("",!0)],6)))),256)):d("",!0)],64)))),256))]),0==s.countsType[t]?(r(),o("tr",_)):d("",!0)],64)))),256))],512)],544)]))));g.render=H,g.__scopeId="data-v-c6e93830";export default g;
